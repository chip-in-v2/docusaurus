"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7002],{1528:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"devDesign/apigateway/service-supply-chain","title":"CSP \u30d8\u30c3\u30c0\u306e\u30b5\u30fc\u30d3\u30b9\u30b5\u30d7\u30e9\u30a4\u30c1\u30a7\u30fc\u30f3\u653b\u6483\u306b\u5bfe\u3059\u308b\u52b9\u679c","description":"\u30b5\u30fc\u30d3\u30b9\u30b5\u30d7\u30e9\u30a4\u30c1\u30a7\u30fc\u30f3\u653b\u6483\u3068\u306f\u3001\u81ea\u793e\u306e\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u304c\u5229\u7528\u3057\u3066\u3044\u308b\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u306e\u30b5\u30fc\u30d3\u30b9\uff08\u89e3\u6790\u30c4\u30fc\u30eb\u3001\u5e83\u544a\u914d\u4fe1\u3001\u30c1\u30e3\u30c3\u30c8\u30dc\u30c3\u30c8\u306a\u3069\uff09\u304c\u6539\u3056\u3093\u3055\u308c\u3001\u305d\u3053\u304b\u3089\u60aa\u610f\u306e\u3042\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u9001\u308a\u8fbc\u307e\u308c\u308b\u653b\u6483\u3067\u3059\u3002\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u60c5\u5831\u3092\u76d7\u307f\u51fa\u3059\u300cMagecart\u653b\u6483\u300d\u306a\u3069\u304c\u4ee3\u8868\u4f8b\u3067\u3059\u3002","source":"@site/../docs/devDesign/40-apigateway/60-service-supply-chain.md","sourceDirName":"devDesign/40-apigateway","slug":"/devDesign/apigateway/service-supply-chain","permalink":"/docs/devDesign/apigateway/service-supply-chain","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":60,"frontMatter":{},"sidebar":"devDesign","previous":{"title":"CSP\u30d8\u30c3\u30c0\u306e\u8a2d\u5b9a","permalink":"/docs/devDesign/apigateway/cspheader"}}');var c=n(31085),t=n(71184);const i={},o="CSP \u30d8\u30c3\u30c0\u306e\u30b5\u30fc\u30d3\u30b9\u30b5\u30d7\u30e9\u30a4\u30c1\u30a7\u30fc\u30f3\u653b\u6483\u306b\u5bfe\u3059\u308b\u52b9\u679c",l={},d=[{value:"CSP\u304c\u3069\u306e\u3088\u3046\u306b\u9632\u5fa1\u3059\u308b\u304b",id:"csp\u304c\u3069\u306e\u3088\u3046\u306b\u9632\u5fa1\u3059\u308b\u304b",level:2},{value:"\u9650\u754c\u3068\u88dc\u5b8c\u7b56: SRI (Subresource Integrity)",id:"\u9650\u754c\u3068\u88dc\u5b8c\u7b56-sri-subresource-integrity",level:2}];function a(e){const s={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,t.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.header,{children:(0,c.jsx)(s.h1,{id:"csp-\u30d8\u30c3\u30c0\u306e\u30b5\u30fc\u30d3\u30b9\u30b5\u30d7\u30e9\u30a4\u30c1\u30a7\u30fc\u30f3\u653b\u6483\u306b\u5bfe\u3059\u308b\u52b9\u679c",children:"CSP \u30d8\u30c3\u30c0\u306e\u30b5\u30fc\u30d3\u30b9\u30b5\u30d7\u30e9\u30a4\u30c1\u30a7\u30fc\u30f3\u653b\u6483\u306b\u5bfe\u3059\u308b\u52b9\u679c"})}),"\n",(0,c.jsxs)(s.p,{children:[(0,c.jsx)(s.strong,{children:"\u30b5\u30fc\u30d3\u30b9\u30b5\u30d7\u30e9\u30a4\u30c1\u30a7\u30fc\u30f3\u653b\u6483"}),"\u3068\u306f\u3001\u81ea\u793e\u306e\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u304c\u5229\u7528\u3057\u3066\u3044\u308b",(0,c.jsx)(s.strong,{children:"\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u306e\u30b5\u30fc\u30d3\u30b9\uff08\u89e3\u6790\u30c4\u30fc\u30eb\u3001\u5e83\u544a\u914d\u4fe1\u3001\u30c1\u30e3\u30c3\u30c8\u30dc\u30c3\u30c8\u306a\u3069\uff09\u304c\u6539\u3056\u3093"}),"\u3055\u308c\u3001\u305d\u3053\u304b\u3089\u60aa\u610f\u306e\u3042\u308b\u30b9\u30af\u30ea\u30d7\u30c8\u304c\u9001\u308a\u8fbc\u307e\u308c\u308b\u653b\u6483\u3067\u3059\u3002\u30af\u30ec\u30b8\u30c3\u30c8\u30ab\u30fc\u30c9\u60c5\u5831\u3092\u76d7\u307f\u51fa\u3059\u300cMagecart\u653b\u6483\u300d\u306a\u3069\u304c\u4ee3\u8868\u4f8b\u3067\u3059\u3002"]}),"\n",(0,c.jsx)(s.h2,{id:"csp\u304c\u3069\u306e\u3088\u3046\u306b\u9632\u5fa1\u3059\u308b\u304b",children:"CSP\u304c\u3069\u306e\u3088\u3046\u306b\u9632\u5fa1\u3059\u308b\u304b"}),"\n",(0,c.jsxs)(s.p,{children:["\u4eee\u306b\u3001\u3042\u306a\u305f\u304c\u5229\u7528\u3057\u3066\u3044\u308b\u89e3\u6790\u30c4\u30fc\u30eb ",(0,c.jsx)(s.code,{children:"https://analytics.example.com/tracker.js"})," \u304c\u653b\u6483\u8005\u306b\u3088\u3063\u3066\u6539\u3056\u3093\u3055\u308c\u305f\u3068\u3057\u307e\u3059\u3002"]}),"\n",(0,c.jsxs)(s.ol,{children:["\n",(0,c.jsxs)(s.li,{children:["\n",(0,c.jsxs)(s.p,{children:[(0,c.jsx)(s.strong,{children:"\u4e0d\u6b63\u306a\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\u3092\u30d6\u30ed\u30c3\u30af"}),":\n\u3082\u3057\u3001\u6539\u3056\u3093\u3055\u308c\u305f ",(0,c.jsx)(s.code,{children:"tracker.js"})," \u304c\u3001\u3055\u3089\u306b\u5225\u306e\u653b\u6483\u7528\u30b5\u30fc\u30d0\u30fc ",(0,c.jsx)(s.code,{children:"https://evil-server.com/attack.js"})," \u3092\u8aad\u307f\u8fbc\u3082\u3046\u3068\u3057\u3066\u3082\u3001\u3042\u306a\u305f\u306eCSP\u3067 ",(0,c.jsx)(s.code,{children:"script-src"})," \u306b ",(0,c.jsx)(s.code,{children:"https://evil-server.com"})," \u3092\u8a31\u53ef\u3057\u3066\u3044\u306a\u3051\u308c\u3070\u3001\u3053\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u8aad\u307f\u8fbc\u307f\u306f\u30d6\u30e9\u30a6\u30b6\u306b\u3088\u3063\u3066",(0,c.jsx)(s.strong,{children:"\u30d6\u30ed\u30c3\u30af"}),"\u3055\u308c\u307e\u3059\u3002"]}),"\n"]}),"\n",(0,c.jsxs)(s.li,{children:["\n",(0,c.jsxs)(s.p,{children:[(0,c.jsx)(s.strong,{children:"\u4e0d\u6b63\u306a\u901a\u4fe1\u3092\u30d6\u30ed\u30c3\u30af"}),":\n\u3082\u3057\u3001",(0,c.jsx)(s.code,{children:"tracker.js"})," \u81ea\u4f53\u306b\u57cb\u3081\u8fbc\u307e\u308c\u305f\u653b\u6483\u30b3\u30fc\u30c9\u304c\u3001\u76d7\u307f\u51fa\u3057\u305f\u60c5\u5831\u3092\u653b\u6483\u8005\u306e\u30b5\u30fc\u30d0\u30fc ",(0,c.jsx)(s.code,{children:"https://evil-server.com/steal"})," \u306b\u9001\u4fe1\u3057\u3088\u3046\u3068\u3057\u3066\u3082\u3001CSP\u306e ",(0,c.jsx)(s.code,{children:"connect-src"})," \u3067\u3053\u306e\u30c9\u30e1\u30a4\u30f3\u3092\u8a31\u53ef\u3057\u3066\u3044\u306a\u3051\u308c\u3070\u3001\u30c7\u30fc\u30bf\u9001\u4fe1\u306f",(0,c.jsx)(s.strong,{children:"\u30d6\u30ed\u30c3\u30af"}),"\u3055\u308c\u307e\u3059\u3002"]}),"\n"]}),"\n"]}),"\n",(0,c.jsxs)(s.p,{children:["\u3053\u306e\u3088\u3046\u306b\u3001CSP\u306f**\u300c\u8a31\u53ef\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u4ee5\u5916\u304b\u3089\u306e\u30ea\u30bd\u30fc\u30b9\u8aad\u307f\u8fbc\u307f\u300d",(0,c.jsx)(s.strong,{children:"\u3068"}),"\u300c\u8a31\u53ef\u3057\u305f\u30c9\u30e1\u30a4\u30f3\u4ee5\u5916\u3078\u306e\u30c7\u30fc\u30bf\u9001\u4fe1\u300d**\u3092\u7981\u6b62\u3059\u308b\u305f\u3081\u3001\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u30b5\u30fc\u30d3\u30b9\u304c\u4fb5\u5bb3\u3055\u308c\u305f\u5834\u5408\u3067\u3082\u3001\u88ab\u5bb3\u306e\u767a\u751f\u3084\u62e1\u5927\u3092\u76f4\u63a5\u7684\u306b\u9632\u3050\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002"]}),"\n",(0,c.jsx)(s.h2,{id:"\u9650\u754c\u3068\u88dc\u5b8c\u7b56-sri-subresource-integrity",children:"\u9650\u754c\u3068\u88dc\u5b8c\u7b56: SRI (Subresource Integrity)"}),"\n",(0,c.jsxs)(s.p,{children:["\u305f\u3060\u3057\u3001CSP\u306b\u3082\u9650\u754c\u304c\u3042\u308a\u307e\u3059\u3002\u3082\u3057 ",(0,c.jsx)(s.code,{children:"tracker.js"})," \u306e\u30d5\u30a1\u30a4\u30eb\u81ea\u4f53\u304c\u6539\u3056\u3093\u3055\u308c\u3001\u305d\u306e\u30d5\u30a1\u30a4\u30eb\u5185\u3067\u653b\u6483\u304c\u5b8c\u7d50\u3059\u308b\u5834\u5408\u3001",(0,c.jsx)(s.code,{children:"script-src 'self' https://analytics.example.com"})," \u306e\u3088\u3046\u306b\u4fe1\u983c\u3057\u3066\u8a31\u53ef\u3057\u3066\u3044\u308b\u30c9\u30e1\u30a4\u30f3\u306a\u306e\u3067\u3001CSP\u3060\u3051\u3067\u306f\u9632\u3052\u307e\u305b\u3093\u3002"]}),"\n",(0,c.jsxs)(s.p,{children:["\u305d\u3053\u3067\u6709\u52b9\u306a\u306e\u304c ",(0,c.jsx)(s.strong,{children:"SRI (Subresource Integrity)"})," \u3068\u306e\u7d44\u307f\u5408\u308f\u305b\u3067\u3059\u3002SRI\u306f\u3001",(0,c.jsx)(s.code,{children:"<script>"}),"\u30bf\u30b0\u306b\u671f\u5f85\u3055\u308c\u308b\u30d5\u30a1\u30a4\u30eb\u306e\u30cf\u30c3\u30b7\u30e5\u5024\u3092\u6307\u5b9a\u3057\u3066\u304a\u304f\u3053\u3068\u3067\u3001\u3082\u3057\u30d5\u30a1\u30a4\u30eb\u306e\u5185\u5bb9\u304c1\u30d3\u30c3\u30c8\u3067\u3082\u6539\u3056\u3093\u3055\u308c\u3066\u3044\u308c\u3070\u3001\u30d6\u30e9\u30a6\u30b6\u304c\u305d\u306e\u30b9\u30af\u30ea\u30d7\u30c8\u306e\u5b9f\u884c\u3092\u30d6\u30ed\u30c3\u30af\u3059\u308b\u4ed5\u7d44\u307f\u3067\u3059\u3002"]}),"\n",(0,c.jsx)(s.pre,{children:(0,c.jsx)(s.code,{className:"language-html",children:'<script src="https://analytics.example.com/tracker.js"\n        integrity="sha384-oqVuAfXRKap7fdgcCY5uykM6+R9GqQ8K/uxy9rx7HNQlGYl1kPzQho1wx4JwY8wJ"\n        crossorigin="anonymous"><\/script>\n'})}),"\n",(0,c.jsxs)(s.p,{children:[(0,c.jsx)(s.strong,{children:"CSP\u3067\u300c\u51fa\u6240\u300d\u3092\u3001SRI\u3067\u300c\u5185\u5bb9\u300d\u3092\u691c\u8a3c\u3059\u308b"}),"\u3053\u3068\u3067\u3001\u30b5\u30fc\u30d3\u30b9\u30b5\u30d7\u30e9\u30a4\u30c1\u30a7\u30fc\u30f3\u653b\u6483\u306b\u5bfe\u3059\u308b\u8010\u6027\u3092\u98db\u8e8d\u7684\u306b\u9ad8\u3081\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002"]})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,c.jsx)(s,{...e,children:(0,c.jsx)(a,{...e})}):a(e)}},71184:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>o});var r=n(14041);const c={},t=r.createContext(c);function i(e){const s=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:i(e.components),r.createElement(t.Provider,{value:s},e.children)}}}]);