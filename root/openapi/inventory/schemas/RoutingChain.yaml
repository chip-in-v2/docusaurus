type: object
required:
  - name
  - title
properties:
  name:
    type: string
    description: |-
      ルーティングチェーンの名前。URN の一部として使用される。
      文字列は小文字英字、数字、ハイフン、アンダースコアのみを含むことができる。
    example: cms-chain
  realm:
    type: string
    readOnly: true
    format: urn
    description: |-
      ルーティングチェインが属するレルムの名前。
    example: urn:chip-in:realm:example-realm
  urn:
    type: string
    readOnly: true
    format: urn
    description: |-
      ルーティングチェーンのurn。
    example: urn:chip-in:routing-chain:example-realm:cms-chain
  title:
    type: string
    description: |-
      ルーティングチェーンの日本語名称です。
    example: CMSシステムルーティングチェーン
  description:
    type: string
    description: |-
      ルーティングチェーンの説明文です。
      
    example: CMSシステムのWebUI を提供するルーティングチェーンです。
  rules:
    type: array
    description: |-
      ルーティングチェーンのルールのリスト。各ルールは、リクエストを処理するための条件とアクションを定義する。
      ルールは、リクエストのホストまたはパスを照合し、適切なアクションを実行するために使用される。
    items:
      type: object
      required:
        - match
        - action
      description: |-
        ルーティングチェーンのルール。ルールは、リクエストを処理するための条件とアクションを定義する。
        ルールは、リクエストのホストまたはパスを照合し、適切なアクションを実行するために使用される。
      properties:
        match:
          type: string
          description: |-
            リクエストのホストまたはパスを照合するための条件を記述する。
            hostname または request.path の単独条件、または両者の AND 条件が指定できる。
            使用できる演算子は equals、starts_with、ends_withの3つ。
          example: "hostname.equals('api.example.com') and request.path.starts_with('/token/')"
        action:
          oneOf:
            - $ref: './Proxy.yaml'
            - $ref: './Redirect.yaml'
            - $ref: './RequireAuthentication.yaml'
            - $ref: './SetDownstreamResponseHeaders.yaml'
            - $ref: './SetUpstreamRequestHeaders.yaml'
additionalProperties: false
